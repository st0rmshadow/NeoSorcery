#!/usr/bin/env zsh
# Resolve grimoire paths
if [[ "$1" == "-h" || "$1" == "--help" || "$1" == "help" ]]; then
  echo "Usage: cast <spell>
Options:
  -h, --help     Show this help message and exit

Description:
  Installs a spell by name. Looks first in ~/.sorcery/grimoire then in /etc/neosorcery/grimoire."
  exit 0
fi

if [[ -d "$HOME/.sorcery/grimoire" ]]; then
  GRIMOIRE_PATH_USER="$HOME/.sorcery/grimoire"
else
  GRIMOIRE_PATH_USER=""
fi
GRIMOIRE_PATH_GLOBAL="/etc/neosorcery/grimoire"

#!/usr/bin/env zsh
[[ -f /etc/sorcery.conf ]] && source /etc/sorcery.conf
[[ -f "$HOME/.sorcery/sorcery.local.conf" ]] && source "$HOME/.sorcery/sorcery.local.conf"

SPELL_NAME="$1"
if [[ -z "$SPELL_NAME" ]]; then
  echo "Error: No spell name provided." >&2
  exit 1
fi

if command -v screen >/dev/null; then
  screen -dmS cast_$SPELL_NAME zsh -c "cast_internal $SPELL_NAME"
else
  cast_internal "$SPELL_NAME"
fi
